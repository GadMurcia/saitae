<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:h="http://xmlns.jcp.org/jsf/html">

    <body>
        <ui:composition template="./../WEB-INF/template/plantilla1.xhtml">
            <ui:define name="content">
                <f:event listener="#{permisoEstudianteController.inicial()}" type="preRenderView"/>
                <style>
                    .centred-form{
                        margin: 0 auto;
                        align-content: center;
                        align-items: center;
                        width: 50%;
                    }
                </style>
                <h:form styleClass="centred-form" id="frm">
                    <p:panel header="Gestionar nuevo permiso">
                        <h:panelGrid id="w" columns="2" columnClasses="label, value">
                            <p:outputLabel for="console" value="Tipo del permiso: *" />
                            <p:selectOneMenu id="console" value="#{permisoEstudianteController.p.tipoPermiso1.idtipoPermiso}" 
                                             style="width:125px" title="Seleccione el permiso que necesita">
                                <f:selectItems value="#{permisoEstudianteController.listaPermisos()}"/>
                                <f:ajax render="console1" execute="SeleccionPermiso"/>
                            </p:selectOneMenu>

                            <p:outputLabel for="console" value="¿Para quién es el permiso?: *" />
                            <p:selectOneMenu id="console1" value="#{permisoEstudianteController.id}" 
                                             style="width:125px" title="Seleccione el permiso que necesita"
                                             disabled="#{!permisoEstudianteController.seleccionPermiso}">
                                <f:selectItems value="#{permisoEstudianteController.listaEstudiantes()}"/>
                                <p:ajax update="m frm:summit"/>
                            </p:selectOneMenu>

                            <p:column/>
                            <p:panelGrid id="m" columns="6" columnClasses="label, value, label, value, label, value">
                                <h:outputLabel value="Bachillerato: "/>
                                <h:outputLabel value="#{permisoEstudianteController.m.grado.gradoPK.gradoModalidad}"/>

                                <h:outputLabel value="Grado: "/>
                                <h:outputLabel value="#{permisoEstudianteController.m.grado.gradoPK.idgrado}"/>

                                <h:outputLabel value="Sección: "/>
                                <h:outputLabel value="#{permisoEstudianteController.m.grado.gradoPK.gradoSeccion}"/>
                            </p:panelGrid>

                            <h:outputLabel value="Motivo: *"/>
                            <p:inputText value="#{permisoEstudianteController.p.permisosMotivo}" required="true" />

                            <h:outputLabel value="Solicitado por: "/>
                            <h:outputLabel value="#{permisoEstudianteController.us.persona.personaNombre} 
                                           #{permisoEstudianteController.us.persona.personaApellido}"/>

                            <p:outputLabel for="mask" value="Fecha de inicio:" />
                            <p:calendar id="mask" value="#{permisoEstudianteController.p.permisoFechaInicio}" 
                                        pattern="dd-MM-yyyy" mask="true" />

                            <p:outputLabel for="mask1" value="Fecha de finalización: " />
                            <p:calendar id="mask1" value="#{permisoEstudianteController.p.permisoFechafin}" 
                                        pattern="dd-MM-yyyy" mask="true" />
                        </h:panelGrid>
                    </p:panel>
                    <p:commandButton id="summit" value="Solicitar" disabled="#{!permisoEstudianteController.seleccionEstudiante}"
                                     actionListener="#{permisoEstudianteController.guardar()}" update=":form0:msgs frm"/>
                </h:form>
            </ui:define>

        </ui:composition>
    </body>
</html>
